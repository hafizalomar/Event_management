{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    <title>Document</title>
</head>
<body class="container min-h-screen mx-auto bg-cover bg-center font-normal bg-[url({% static "images/eventpic.jpg" %})]">
    {% include "header.html" %}

    <div class="grid grid-cols-1 md:grid-cols-4 gap-5 mt-5">
        <a href="{% url "dashbord" %}">
            <div class="bg-white rounded-xl shadow-sm p-6">
                <h1 class="text-base font-medium text-gray-500 mb-4">TOTAL PARTICIPANT</h1>
                <div class="flex justify-between items-start">
                    <div>
                        <h2 class="text-3xl font-semibold mb-2">{{ total_participants }}</h2>
                        <p class="text-sm font-medium text-gray-500">11 last month</p>
                    </div>
                    <div class="text-blue-600 bg-blue-100 rounded-full p-3 hover:text-white hover:bg-blue-300">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6 font-black">
                            <path stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184" />
                        </svg>
                    </div>
                </div>
            </div>
        </a>
        <a href="{% url "dashbord" %}?type=total_event">
            <div class="bg-white rounded-xl shadow-sm p-6">
                <h1 class="text-base font-medium text-gray-500 mb-4">TOTAL EVENTS</h1>
                <div class="flex justify-between items-start">
                    <div>
                        <h2 class="text-3xl font-semibold mb-2">{{ counts.total_events }}</h2>
                        <p class="text-sm font-medium text-gray-500">11 last month</p>
                    </div>
                    <div class="text-blue-600 bg-blue-100 rounded-full p-3 hover:text-white hover:bg-blue-300">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6 font-black">
                            <path stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184" />
                        </svg>
                    </div>
                </div>
            </div>
        </a>
        <a href="{% url "dashbord" %}?type=upcoming_events">
            <div class="bg-white rounded-xl shadow-sm p-6">
                <h1 class="text-base font-medium text-gray-500 mb-4">UPCOMING EVENTS</h1>
                <div class="flex justify-between items-start">
                    <div>
                        <h2 class="text-3xl font-semibold mb-2">{{ counts.upcoming_events }}</h2>
                        <p class="text-sm font-medium text-gray-500">11 last month</p>
                    </div>
                    <div class="text-blue-600 bg-blue-100 rounded-full p-3 hover:text-white hover:bg-blue-300">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6 font-black">
                            <path stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184" />
                        </svg>
                    </div>
                </div>
            </div>
        </a>
        <a href="{% url "dashbord" %}?type=past_events">
            <div class="bg-white rounded-xl shadow-sm p-6">
                <h1 class="text-base font-medium text-gray-500 mb-4">PAST EVENTS</h1>
                <div class="flex justify-between items-start">
                    <div>
                        <h2 class="text-3xl font-semibold mb-2">{{ counts.past_events }}</h2>
                        <p class="text-sm font-medium text-gray-500">11 last month</p>
                    </div>
                    <div class="text-blue-600 bg-blue-100 rounded-full p-3 hover:text-white hover:bg-blue-300">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6 font-black">
                            <path stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184" />
                        </svg>
                    </div>
                </div>
            </div>
        </a>
    </div>

    <div>
        <div class="flex-1 overflow-auto mt-5 rounded-md">
            <table class="w-full border border-gray-300 bg-white">
              <thead>
                <tr class="bg-gray-100">
                  <th class="px-6 py-3 text-left text-gray-700 font-medium border-b">Img</th>
                  <th class="px-6 py-3 text-left text-gray-700 font-medium border-b">Name</th>
                  <th class="px-6 py-3 text-left text-gray-700 font-medium border-b">Description</th>
                  <th class="px-6 py-3 text-left text-gray-700 font-medium border-b">Location</th>
                  <th class="px-6 py-3 text-left text-gray-700 font-medium border-b">Category</th>
                  <th class="px-6 py-3 text-left text-gray-700 font-medium border-b">Participant count</th>
                  <th class="px-6 py-3 text-left text-gray-700 font-medium border-b">Action</th>
                </tr>
              </thead>
              <tbody>
                {% for event in events %}
                  <tr class="border-b hover:bg-gray-50">
                    <td class="px-6 py-4"><img class="w-16 h-16 object-cover rounded" src="{% static "images/eventpic.jpg" %}" alt=""></td>
                    <td class="px-6 py-4">{{ event.name }}</td>
                    <td class="px-6 py-4">{{ event.description }}</td>
                    <td class="px-6 py-4">{{ event.location }}</td>
                    <td class="px-6 py-4">{{ event.category.name }}</td>
                    <td class="px-6 py-4">{{ event.participants.count }}</td>
                    <td class="px-6 py-4">
                      <div class="flex gap-2">
                        <div>
                          <form action="{% url "update_event" event.id %}" method="GET">
                            <button type="submit" class="bg-blue-600 p-2 rounded-xl text-white">
                                Edit
                            </button>
                          </form>
                        </div>
                        <div>
                          <form action="{% url "delete_event" event.id %}" method="POST">
                            {% csrf_token %}
                            <button type="submit" class="bg-red-600 p-2 rounded-xl text-white">
                                Delete
                            </button>
                          </form>
                        </div>
                      </div>
                    </td>
                  </tr>
                {% endfor %}
            </tbody>
          </table>
        </div>
    </div>
    {% include "footer.html" %}
</body>
</html>